%title: ANSIBLE
%author: pmerle


# ANSIBLE : Premier Playbook & Command


* playbook : 
		* fichier déclenchant les actions à réaliser
		* sert à articuler l'inventory avec les rôles
		* peut inclure des tasks (actions) > éviter
		* peut inclure des variables (éviter autant que possible)
		* peut faire tout ce que fait un rôle (globalement) > rôle
		* spécifier quel user et comment ?

* une commande : ansible-playbook

* nombreuses options :
		* -i : inventory

		* -l : limit > spécifier un/des groupes ou serveurs ou patterns

		* -u : user

		* -b : become > sudo

		* -k : password de ssh (à éviter)

		* -K : password du sudo

		* -C : check > dry run

		* -D : diff > afficher les différences avant/après les tasks (actions)

		* --ask-vault : prompt pour le password vault

		* --syntax-check : vérfier la syntax

		* --vault-password-file : passer le vault password par un fichier

		* -e : surcharger n'importe quelle variable

		* -f : nombre de parallélisation

		* -t : filtrer sur les tags (--skip-tags)

		* --flush-cache : éviter l'utilisation du cache

		* --step : une tâche à la fois (confirmation via prompt)

		* --start-at-task : commencer à une tâche spécifiquement

		* --list-tags : lister tous les tags rencontrés

		* --list-tasks : liste les tâches qui vont être exécutées


----------------------------------------------------------------------------------------------------


# ANSIBLE : Premier Playbook & Command


* premier playbook

```
- name: Mon Playbook !!
  hosts: all
  remote_user: vagrant
  become_user: yes
  tasks:
  - name: je debug
    debug:
      msg: "{{ var1 }}"
```
